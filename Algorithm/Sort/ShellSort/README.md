# Shell Sort

### Shell Sort란?

Shell Sort는 시간복잡도가 N<sub>2</sup>인 정렬 알고리즘 중에서 어느 정도 정렬이 되어있을 수록 시간복잡도가 줄어드는 [Insert Sort](/Algorithm/Sort/InsertSort)(삽입 정렬)을 보완한 정렬 방식이라고 볼 수 있다. 따라서 Insert Sort를 정확하게 알지 못한다면 Insert Sort에 대해서 먼저 알고 해당 정렬 알고리즘을 공부하는 것을 추천한다.

Shell Sort의 알고리즘은 배열에 갭을 두어(처음 갭은 N/2) 여러가지 배열로 나눈 후에 각 배열을 Insert Sort를 이용하여 정렬하고, 갭을 줄여서 같은 동작을 반복하는 것이다. 예를 들어 원소의 개수가 총 10개인 배열의 경우 처음 갭은 5 이므로, 원소가 2개인 총 5개의 배열이 있다고 생각할 수 있다. 해당 배열들을 모두 Insert Sort를 통해 정렬을 해준 후에 원래 배열로 합친다면 처음 배열보다는 더 정렬이 된 형태일 것이다. 이러한 과정을 갭을 줄여가며 1이 될 때까지 반복한다. 

시행의 결과는 다음과 같다.( ` `로 표시된 숫자가 이전 배열의 값과 비교해서 자기 자리를 찾아서 들어감)

처음 배열: 
| 5 | 3 | 7 | 11 | 15 | 2 | 2 | 6 | 1 | 8 |
|--- |--- |--- |--- |--- |--- |--- |--- |--- |--- |

1번째 시행 과정:
| 5 |  |  |  |  | 2 |  |  |  |  |
|--- |--- |--- |--- |--- |--- |--- |--- |--- |--- |
|  | **3** |  |  |  |  | **2** |  |  |  |
|  |  | **7** |  |  |  |  | **6** |  |  |
|  |  |  | **11** |  |  |  |  | **1** |  |
|  |  |  |  | **15** |  |  |  |  | **8** |

각 배열을 갭 마다 Insert Sort를 한 후:
| 2 |  |  |  |  | 5 |  |  |  |  |
|--- |--- |--- |--- |--- |--- |--- |--- |--- |--- |
|  | **2** |  |  |  |  | **3** |  |  |  |
|  |  | **6** |  |  |  |  | **7** |  |  |
|  |  |  | **1** |  |  |  |  | **11** |  |
|  |  |  |  | **8** |  |  |  |  | **15** |

`첫번째 시행 결과`:
| 2 | 2 | 6 | 1 | 8 | 5 | 3 | 7 | 11 | 15 |
|--- |--- |--- |--- |--- |--- |--- |--- |--- |--- |

<br>
 
 
<br>


2번째 시행 과정:
| 2 |  |  | 1 |  |  | 3 |  |  | 15 |
|--- |--- |--- |--- |--- |--- |--- |--- |--- |--- |
|  | **2** |  |  | **8** |  |  | **7** |  |  |
|  |  | **6** |  |  | **5** |  |  | **11** |  |

각 배열을 갭 마다 Insert Sort를 한 후:
| 1 |  |  | 2 |  |  | 3 |  |  | 15 |
|--- |--- |--- |--- |--- |--- |--- |--- |--- |--- |
|  | **2** |  |  | **7** |  |  | **8** |  |  |
|  |  | **5** |  |  | **6** |  |  | **11** |  |

`2번째 시행 결과`:
| 1 | 2 | 5 | 2 | 7 | 6 | 3 | 8 | 11 | 15 |
|--- |--- |--- |--- |--- |--- |--- |--- |--- |--- |


<br>
<br>
<br>

`3번째 시행 결과(갭이 1)`:
| 1 | 2 | 2 | 3 | 5 | 6 | 7 | 8 | 11 | 15 |
|--- |--- |--- |--- |--- |--- |--- |--- |--- |--- |


### Shell Sort Code 구현(c++)

``` cpp
//백준 2750번
#include <iostream>
using namespace std;

int main() {
	int N{};
	int check = 0;

	cin >> N;
	int a[1000];

	for (int i = 0; i < N; i++) {
		cin >> a[i];
	}

	for (int i = 1; i < N; i++) {
		for (int j = i; j > 0; j--) {
			check = 0;
			if (a[j] < a[j - 1]) {	//배열의 이전 index에 들어있는 수와 비교
				int temp = a[j];
				a[j] = a[j - 1];
				a[j - 1] = temp;
				check = 1;	// 자리를 바꿨으면 다음 숫자와도 비교를 해야함
			}
			if (!check)	// 자리가 바뀌지 않았으면 자신의 자리에 삽입이 된 것이므로 반복문을 탈출
				break;
		}
	}

	for (int i = 0; i < N; i++) {
		cout << a[i] << " ";
	}

}
```

### 시간복잡도

Insert Sort의 시간 복잡도는 이미 정렬되어 있지 않은 경우를 고려하지 않는다는 전제하에 Average Case와 Worst case의 경우에 n<sup>2</sup>으로 Bubble Sort와 Selection Sort와동일하지만 Best Case(이미 정렬이 되어있는 경우)의 경우에 자신의 자리를 찾아들어가는 과정에서 반복문이 모두 1번만에 끝나므로 시간복잡도가 n이 된다. 따라서 이미 정렬이 어느정도 되어있는 배열에서는 매우 빠르다는 특징이 있다.
