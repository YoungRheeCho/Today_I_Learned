# BitMask(비트마스크)

### BitMask(비트마스크)란?
 **BitMask**는 2진수를 기본으로 하는 컴퓨터의 연산방식을 활용해 자료구조로 사용하는 것이다. 2진수의 각 자리에 1이면 해당 수가 존재하고 0이면 해당 수가 존재하지 않는 것으로 정의함으로써, 따로 배열을 만들지 않고도 정수 하나만으로 데이터를 저장할 수 있다.
 <br><br>
 예를 들면 다음과 같다.
 
 + *1101*: {1, 3, 4}가 저장된 집합
 + *101100101*: {1, 3, 6, 7, 9}가 저장된 집합.

원래라면 1, 3, 4 총 3가지 숫자를 저장하기 위해서는 크기가 3인 배열이 필요한데, 1101은 10진수의 13과 같으므로 13이라는 한 가지 숫자만으로 {1, 3, 4}라는 집합을 포현할 수 있는 것이다.

### 비트 연산
비트마스크로 표현된 집합에서 숫자 n이 포함이 되어있는지를 확인하는 방법은 2<sup>n</sup>이 1인지 0인지를 확인하면 되고, 집합에 숫자를 추가하거나 빼는 행위는 해당 자리를 1로 만들거나 0으로 만들면 된다. 그리고 이러한 연산과정은 흔히 아는 덧셈 혹은 뺄셈과 같은 연산자로 연산하지 않고 **boolean function**을 이용하여 연산한다.

+ **Bitwise Operation** &(AND), |(OR), ~(NOT), ^(NOR)

|A|B|~A|A&B|AlB|A^B|
|--- |--- |--- |--- |--- |--- |
|0|0|1|0|0|0|
|0|1|1|0|1|1|
|1|0|0|0|1|1|
|1|1|0|1|1|0|

두 수를 비트 연산을 하는 경우, 가장 뒤의 자리부터 하나씩 연산을 하면 된다.
<br>
```
A = 10, B = 7인 경우 이를 2진수로 바꾸면
A = 1100, B = 111 이고,
두 수에 대하여 각 연산을 수행하면 다음과 같다.
 0111    0111    0111
&1100   |1100   ^1100
------  ------  ------
 0100    1111    1011

```

비트 연산에는 생소하지만 Shift left(<<), Shift right(>>)라는 연산도 존재하는데, 각각에 대한 정의는 다음과 같다.
+ A << B (A를 왼쪽으로 B만큼 민다.)
+ A >> B (A를 오른쪽으로 B만큼 민다.)

해당 연산을 수행하는 예시는 다음과 같다.

**Shift Left(<<)**
<br>
1 << 0 = 1(1<sub>2</sub>)<br>
1 << 1 = 2(10<sub>2</sub>)<br>
1 << 2 = 4(100<sub>2</sub>)<br>
1 << 3 = 8(1000<sub>2</sub>)<br>
1 << 4 = 16(10000<sub>2</sub>)<br>
3 << 3 = 24(11000<sub>2</sub>)<br>
5 << 10 = 5120(1010000000<sub>2</sub>)<br><br>
**A << B는 A*2<sup>B</sup>와 같다.**
<br>
<br>
**Shift Right(>>)**<br>
1 >> 0 = 1(1<sub>2</sub>)<br>
1 >> 1 = 0(0<sub>2</sub>)<br>
10 >> 1 = 5(101<sub>2</sub>)<br>
10 >> 2 = 2(10<sub>2</sub>)<br>
30 >> 1 = 15(1111<sub>2</sub>)<br><br>
**A >> B는 A/2<sup>B</sup>와 같다.**
<br>

비트마스크를 통해 집합을 표현을 할 때, 1은 그 자리에 해당 수가 존재한다는 의미로 사용된다. 그러므로 3이라는 숫자를 추가한다면, 1000<sub>2</sub>와 OR연산을 하면 된다. 그리고 이는 숫자 3이 존재하지 않을 때, 정수 8을 더하는 것과 같은 의미가 된다. 하지만 숫자 3이 이미 존재하는 경우에 3을 추가하는 연산을 할 경우, 덧셈으로 이를 추가한다면, 비트는 아예 바뀌어 버릴 것이다. 예를들어, 1110<sub>2</sub>에 2를 추가한다면 덧셈으로 추가할시, 10001<sub>2</sub>가 된다. 따라서 추가, 삭제, 토글등의 연산은 반드시 boolean function을 이용하여 진행해야 한다.

